description "all the AWS tools you want"
prompt "you are an AWS expert"
allowed-tools  "@awsdocs"

resource "file://AGENTS.md"
resource "file://README.md"
resource "file://.amazonq/rules/**/*.md"

hook {
    agent-spawn "whoami" {
        command "aws sts get-caller-identity"
        timeout-ms 4000
        cache-ttl-seconds 300
    }
}

native-tool {
   aws {
       allow "ec2" "s3"
       deny "iam"
   }
}

mcp "awsbilling" {
   command "uvx"
   args "awslabs.billing-cost-management-mcp-server@latest"
   env "FASTMCP_LOG_LEVEL" "ERROR"
}

mcp "awsdocs" {
  command "uvx"
  args "awslabs.aws-documentation-mcp-server@latest"
  env "FASTMCP_LOG_LEVEL" "ERROR"
  env "AWS_DOCUMENTATION_PARTITION" "aws"
}
